<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debug Cupid</title>

<style>
html,body {
  margin:0;
  padding:0;
  overflow:hidden;
  touch-action:none;
}

canvas { display:block; }

#lives {
  position:absolute;
  top:10px;
  right:10px;
  color:white;
  font-size:22px;
  z-index:10;
}
</style>
</head>

<body>

<div id="lives">‚ù§Ô∏è 5</div>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let cupidX = canvas.width/2;
let hearts = [];
let lives = 5;

// —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
canvas.addEventListener("mousemove", e => cupidX = e.clientX);
canvas.addEventListener("touchmove", e => cupidX = e.touches[0].clientX);

// —Å–µ—Ä–¥—Ü–∞
setInterval(() => {
  hearts.push({ x: Math.random()*canvas.width, y: -20 });
}, 800);

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // –§–û–ù (–∑–∞–≥–ª—É—à–∫–∞)
  ctx.fillStyle = "#402060";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // –ö–£–ü–ò–î–û–ù (–∑–∞–≥–ª—É—à–∫–∞)
  ctx.fillStyle = "pink";
  ctx.fillRect(cupidX-40, canvas.height-120, 80, 100);

  // –°–ï–†–î–¶–ê
  ctx.font = "30px serif";
  hearts.forEach(h => {
    h.y += 3;
    ctx.fillText("üíó", h.x, h.y);

    if (h.y > canvas.height) {
      lives--;
      document.getElementById("lives").innerText = "‚ù§Ô∏è " + lives;
    }
  });

  hearts = hearts.filter(h => h.y < canvas.height);

  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
